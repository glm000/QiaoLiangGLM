@model JiYiTunnelSystem.MVCSite.Models.User.ChangePasswordVM

@{
    ViewBag.Title = "修改密码";
}

<div class="data-table-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-2 col-md-3 col-sm-3 col-xs-6 mg-b-20">
                <div class="inbox-left-sd">
                    <div class="compose-ml"><a class="btn">用户中心</a></div>
                    <div class="inbox-status">
                        <ul class="inbox-st-nav">
                            <li><a href=@Url.Action("UserInformation","User",new { type="0"})><i class="notika-icon notika-form"></i>用户信息</a></li>
                            <li><a href=@Url.Action("ChangePassword","User")><i class="notika-icon notika-edit"></i>修改密码</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-10 col-md-9 col-sm-9 col-xs-12">
                <div class="data-table-list sm-res-mg-t-30">
                    <div class="basic-tb-hd">
                        <h2>@ViewBag.Title</h2>
                    </div>
                    @using (Html.BeginForm())
                    {
                        @Html.AntiForgeryToken()
                        <div class="form-example-int form-horizental">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-2 col-md-3 col-sm-3 col-xs-12">
                                        @Html.LabelFor(model => model.OldPwd, htmlAttributes: new { @class = "hrzn-fm" })
                                    </div>
                                    <div class="col-lg-4 col-md-7 col-sm-7 col-xs-12">
                                        <div class="nk-int-st">
                                            @Html.EditorFor(model => model.OldPwd, new { htmlAttributes = new { @class = "form-control input-sm input-pwd" } })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-example-int form-horizental">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-2 col-md-3 col-sm-3 col-xs-12">
                                        @Html.LabelFor(model => model.NewPwd, htmlAttributes: new { @class = "hrzn-fm" })
                                    </div>
                                    <div class="col-lg-4 col-md-7 col-sm-7 col-xs-12">
                                        <div class="nk-int-st">
                                            @Html.EditorFor(model => model.NewPwd, new { htmlAttributes = new { @class = "form-control input-sm input-pwd" } })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-example-int form-horizental mg-b-50">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-2 col-md-3 col-sm-3 col-xs-12">
                                        @Html.LabelFor(model => model.ConfirmPwd, htmlAttributes: new { @class = "hrzn-fm" })
                                    </div>
                                    <div class="col-lg-4 col-md-7 col-sm-7 col-xs-12">
                                        <div class="nk-int-st">
                                            @Html.EditorFor(model => model.ConfirmPwd, new { htmlAttributes = new { @class = "form-control input-sm input-pwd" } })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-example-int form-horizental">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-lg-2 col-md-3 col-sm-3 col-xs-12">
                                    </div>
                                    <div class="col-lg-4 col-md-7 col-sm-7 col-xs-12">
                                        <input type="button" onclick="checkAll(this.form)" value="提交" class="btn btn-success" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section head{
    @Styles.Render("~/Content/dialog")
}
@section scripts{
    @Scripts.Render("~/bundles/dialog")
    <script>
        function checkAll(obj) {
            var pwd = document.getElementById('OldPwd');
            var newpwd = document.getElementById('NewPwd');
            var conpwd = document.getElementById('ConfirmPwd');
            if (pwd.value == "") {
                showMessage("密码不能为空");
            }
            else if (!(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,10}$/).test(pwd.value)) {
                showMessage("密码为6-10位字母和数字组合");
            }
            else if (newpwd.value == "") {
                showMessage("密码不能为空");
            }
            else if (!(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,10}$/).test(newpwd.value)) {
                showMessage("密码为6-10位字母和数字组合");
            }
            else if (conpwd.value == "") {
                showMessage("确认密码不能为空");
            }
            else if (newpwd.value != conpwd.value) {
                showMessage("密码不一致");
            }
            else {
                obj.submit();
            }
        }

        function showMessage(err) {
            swal.fire({
                title: err,
                icon: "warning",
                showConfirmButton: false,
                showCancelButton: true,
                cancelButtonColor: "#00C292",
                cancelButtonText: "确认",
            }).then(function (isConfirm) {
                if (isConfirm.value) {
                }
            }).catch({
            });
        }
    </script>
}